$(document).ready(function () {



	//VIDEO

	video_1 = $('.video_section_counter_sm').find('video').get(0);
	video_1.load();

	video_01 = $('.stories__video.vid1').find('video').get(0);
	video_01.load();

	video_02 = $('.stories__video.vid2').find('video').get(0);
	video_02.load();

	video_03 = $('.stories__video.vid3').find('video').get(0);
	video_03.load();

	video_04 = $('.stories__video.vid4').find('video').get(0);
	video_04.load();

	video_05 = $('.stories__video.vid5').find('video').get(0);
	video_05.load();

	var countvideo = $('.stories_item').length;
	var next = parseInt($('.js_sl_next').attr('data-story'));
	var prev = parseInt($('.js_sl_prev').attr('data-story'));
	//alert(countvideo);
	

		$("body").on("click", ".js_pause_story", function (e) {
		
		if ($('.stories__col').hasClass('ready'))
		{  
	
	
		}
	else
	{
			$('.stories__col').addClass('ready');
		video_01.pause();
		video_01.currentTime = 0;

		video_02.pause();
		video_02.currentTime = 0;

		video_03.pause();
		video_03.currentTime = 0;

		video_04.pause();
		video_04.currentTime = 0;

		video_05.pause();
		video_05.currentTime = 0;
		
		}

	});

	function playStoryes(video_num) {

		video_01.pause();
		video_01.currentTime = 0;

		video_02.pause();
		video_02.currentTime = 0;

		video_03.pause();
		video_03.currentTime = 0;

		video_04.pause();
		video_04.currentTime = 0;

		video_05.pause();
		video_05.currentTime = 0;

		var countvideo = $('.stories_item').length;

		if (video_num < 1) {
			video_num = countvideo;
		}

		if (video_num > countvideo) {
			
			video_num = 1;
			
		}
		
		$('.stories__col').removeClass('ready');

		var video = $('.stories__video.vid' + video_num).find('video').get(0);
		video.load();
		
		//alert ($('.stories__video.vid' + video_num).find('video').get(0).duration);
		
		$('.stories_item').removeClass('active');
		$('.stories__progress_item').removeClass('active');
		
				$('.progress_before').css({
    
					'transition' :  'right 0s linear'
			
			});
		
		video.addEventListener('loadedmetadata', function() {
			duracion = video.duration;
			
			$('.progress_before.vid' + video_num).css({
    
					'transition' :  'right ' + duracion + 's linear'
			
			});
			
			$('.stories__progress_item').removeClass('active');
			$('.stories__progress_item.vid' + video_num).addClass('active');
			
			
		});
		
		$('.stories_item.vid' + video_num).addClass('active');



		$('.js_sl_prev').attr('data-story', video_num - 1);

		video.play();

		$('.js_sl_next').attr('data-story', video_num + 1);

		//video_01.play();

		$('.stories__video.vid' + video_num).find('video').on("ended", function (e) {

			//console.debug("Video ended. Current time of videoplay: " + e.target.currentTime );

			video_num++;

			if ((video_num < (countvideo + 1)) && (video_num > 0)) {
				playStoryes(video_num);
			} else {
				$('.stories__col').addClass('ready');
			}

		});

	}

	$("body").on("click", ".js_play_story", function (e) {
		e.preventDefault();

		playStoryes(1);
		$('.stories__col').removeClass('ready');
		//var next = parseInt($(this).attr('data-story'));
		//var prev = parseInt($(this).attr('data-story'));

	});

	$("body").on("click", ".js_sl_next", function (e) {
		e.preventDefault();

		var next = parseInt($(this).attr('data-story'));
		playStoryes(next);
		//var prev = parseInt($(this).attr('data-story'));

	});	
	
	
	


	$("body").on("click", ".js_sl_prev", function (e) {
		e.preventDefault();

		var next = parseInt($(this).attr('data-story'));
		playStoryes(next);
		//var prev = parseInt($(this).attr('data-story'));

	});

	$(".js-swipe").swipe({

		allowPageScroll: "vertical",
		//Generic swipe handler for all directions
		//swipe:function(event, direction, distance, duration, fingerCount, fingerData) {      $(this).text("You swiped " + direction );      }

		swipe: function (event, direction, distance, duration, fingerCount, fingerData) {

			var prevsl = parseInt($('.js_sl_prev').attr('data-story'));
			var nextsl = parseInt($('.js_sl_next').attr('data-story'));

			if (direction == 'left') {

				playStoryes(nextsl);

			}

			if (direction == 'right') {

				playStoryes(prevsl);

			}

		}

	});

	$("body").on("click", ".js-hero__play", function (e) {
		e.preventDefault();
		video_1.pause();
		video_1.currentTime = 0;
		video_1.play();

	});

	$("body").on("click", ".popup_overlay", function (e) {

		if (!$(e.target).closest(".popup_body").length) {

			video_1.pause();
		}

	});

	// INSIDE POPUP_1

	$("body").on("click", ".js_vote_btn", function (e) {
		e.preventDefault();

		if (!$(this).hasClass('vote__item_disabled'))
		{
			var popup_1_img = $(this).attr('data-img');
			var popup_1_text = $(this).attr('data-text');
			var popup_1_header = $(this).attr('data-header');
			var popup_1_vote = $(this).attr('data-vote');

			$('.js-popup_1_img').html('<img src="' + popup_1_img + '" >');
			$('.js-popup_1_title').text(popup_1_header);
			$('.js-popup_1_txt').text(popup_1_text);
			$('.js_vote_popup_tab').attr('data-vote', popup_1_vote);
			
			$('.js_vote_popup_tab').removeClass('ga_golos_1');
			$('.js_vote_popup_tab').removeClass('ga_golos_3');
			$('.js_vote_popup_tab').removeClass('ga_golos_4');
			$('.js_vote_popup_tab').removeClass('ga_golos_5');
			$('.js_vote_popup_tab').removeClass('ga_golos_2');
			
			
			$('.js_vote_popup_tab').addClass('ga_golos_'+ popup_1_vote);

		}

	});

	//Переключение шага получения маски

	$("body").on("click", ".js_mask_popup2", function (e) {
		e.preventDefault();

		$('.popup_mask_step').addClass('none');
		$('.popup_mask_step_1').removeClass('none');
		$('.popup_2').removeClass('popup_1_sended');
	});

	//Переключение шага получения маски

	$("body").on("click", ".js_popup_mask_step", function (e) {
		e.preventDefault();

		$('.popup_mask_step').addClass('none');
		$('.popup_mask_step_2').removeClass('none');

	});

	// к состоянию 2

	$("body").on("click", ".js_vote_popup_tab", function (e) {
		e.preventDefault();

		$('.popup_tab').addClass('none');
		$('.steps_flex').removeClass('none');

	});

	//Назад к состоянию 2

	$("body").on("click", ".js_back_tab", function (e) {
		e.preventDefault();

		$('.popup_tab').addClass('none');
		$('.steps_flex').removeClass('none');
		$('.popup_1').removeClass('popup_1_back');

	});

	// к состоянию 3 (к форме)

	$("body").on("click", ".js_podpiska", function (e) {
		e.preventDefault();

		$('.popup_1').addClass('popup_1_back');
		$('.popup_tab').addClass('none');
		$('.form_flex').removeClass('none');

	});

	//POPUP

	var body = $("body");
	var main = $("main");

	$(body).on("click", "a[data-window], span[data-window], button[data-window], input[data-window], div[data-window]", function (e) {
		if (!$(this).hasClass('vote__item_disabled'))
		{
		//	$('a[data-window], span[data-window], button[data-window], input[data-window], div[data-window]').each(function () {


		e.preventDefault();
		$('.shadow').removeClass('open');
		$('.popup').removeClass('open');

		//Закрываем меню
		$('.shadowmm').removeClass('open');
		$('.mobile-menu').removeClass('open');
		$('.js_open_mobile').removeClass('open');

		var scrolltp = document.documentElement && document.documentElement.scrollTop || document.body.scrollTop;
		body.attr("data-scroll", scrolltp);
		$("body").addClass("body__menu_open");

		body.css('margin-top', '-' + scrolltp + 'px');
		//body.css('top', '-' + scrolltp + 'px');
		//body.css('transform', 'translateY(-' + scrolltp + 'px)');
		//main.css('transform', 'translateY(-' + scrolltp + 'px)');

		var mypopup = $('.' + $(this).attr('data-window'));

		mypopup.addClass("open");

		$('.shadow').addClass('open');

		$('.shadow').scrollTop(0);
		$('.shadow_scroll').scrollTop(0);

		$('.popup_1 ').removeClass('popup_1_back');
		$('.popup_1 ').removeClass('popup_1_sended');
		}
	});

	//POPUP_CLOSE


	$(document).on('click', function (e) {

		if (!$(e.target).closest("a[data-window], span[data-window], button[data-window], input[data-window], div[data-window],.popup_content,.burger_nav,.js-navblock_menu,.preloader,.click-circle,.mce-container,.mce-container *,.mce-panel,.mce-reset,.mce-btn,.mce-btn button,.remove,.shadow,.table-files .delete,.table-files .cancel,.popup_body,.js_back_tab").length) {

			hidePopup();
		}

	});

	$('.js-closepopup').click(function (e) {
		e.preventDefault();
		hidePopup();
		video_1.pause();

	});

	function hidePopup() {

		$('.shadow').removeClass('open');
		$('.popup').removeClass('open');
		$('body').removeClass('open');
		$('.popup_1 ').removeClass('popup_1_back');
		$('.popup_1 ').removeClass('popup_1_sended');

		if ($("body").hasClass("body__menu_open")) {
			var needed_scroll = $("body").attr("data-scroll");
			$("body").removeClass("body__menu_open");
			$("body").css('margin-top', '-' + 0 + 'px');
			$("body").css('transform', '');
			$("main").css('transform', '');
			$(window).scrollTop(needed_scroll);

		}

	};

	$("body").on("click", ".js-scroll", function (e) {
		e.preventDefault();
		var target = this.hash;
		var blockHeight = 0;
		$("body").css('margin-top', '-' + 0 + 'px');
		var $target = $(target);
		$('html, body').stop().animate({
			'scrollTop': $target.offset().top - blockHeight
		}, 500, 'swing', function () {
			//window.location.hash = target;
		});

	});

	//Валидация e-mail


	function ValidMail(input_id) {
		var re = /^[\w-\.]+@[\w-]+\.[a-z]{2,10}$/i;
		var myMail = input_id.val();
		//alert(myMail);
		var valid = re.test(myMail);
		if (valid) {
			input_id.parents('.form_item').removeClass('form_item_error');
			//alert('valid');
		} else {
			input_id.parents('.form_item').addClass('form_item_error');
			//alert('novalid');
		}
		return valid;
	}

	function CheckBox_check(item) {
		if (item.prop('checked')) {

			return false;
		} else {
			return true;
		}
	}

	function CheckBox_check(item) {
		if (item.prop('checked')) {

			return false;
		} else {
			return true;
		}
	}

	//FORMS FRONT

	//Phone
	//Phone
	var $input = $("input.js-phone_mask");
	//if ($("html").hasClass("desktop")) {
	$input.attr("type", "text").mask(
		'NS (000) 000-00-00', {
		translation: {
			'Z': {
				pattern: /[0-9]/,
				optional: true
			},
			'S': {
				pattern: /[7-8]/,
				optional: true
			},
			'N': {
				pattern: /[+]/,
				optional: true
			}
		},
		placeholder: " ",
		autoclear: false
	});

	//Валидация телефона

	function ValidPhoneSimple(input_id) {

		var myMail = input_id.val();

		if ((myMail).length > 13) {
			input_id.parents('.form_item').removeClass('form_item_error');
			//alert('valid');
		} else {
			input_id.parents('.form_item').addClass('form_item_error');
			//alert('novalid');
		}
		return ((myMail).length > 13);
	}

	//Валидация e-mail


	function ValidMail(input_id) {
		var re = /^[\w-\.]+@[\w-]+\.[a-z]{2,10}$/i;
		var myMail = input_id.val();
		//alert(myMail);
		var valid = re.test(myMail);
		if (valid) {
			input_id.parents('.form_item').removeClass('form_item_error');
			//alert('valid');
		} else {
			input_id.parents('.form_item').addClass('form_item_error');
			//alert('novalid');
		}
		return valid;
	}

	function ValidName(input_id) {
		var re = /^[а-яё]+$/i;
		var myMail = input_id.val();
		//alert(myMail);
		var valid = re.test(myMail);
		if (valid) {
			input_id.parents('.form_item').removeClass('form_item_error');
			//alert('valid');
		} else {
			input_id.parents('.form_item').addClass('form_item_error');
			//alert('novalid');
		}
		return valid;
	}

	// Обработка форм при загрузке страницы, при заполнении чтобы не прилипали плейсхолдеры
	//window.setInterval(function () {
	//	$('input:-webkit-autofill').each(function () {
	//		$(this).parents('.form_item').addClass('form_item_has_value');
	//		get_label_for_input($(this));
	//	});
	//}, 20);

	// Обработка форм при загрузке страницы
	$(".jsfocus").each(function () {

		if ($(this).val() == '') {}
		else {

			$(this).parents('.form_item').addClass('form_item_has_value');

		}
		get_label_for_input($(this));

	});

	// показать-скрыть пароль
	$(".js-pass").click(function () {

		if (($(this).parents('.form_item').find('input').prop("type")) == "text") {
			$(this).parents('.form_item').find('input').prop("type", "password");
			$(this).parents('.form_item').find('.input-pass').removeClass('icon-eye');
			$(this).parents('.form_item').find('.input-pass').addClass('icon-eye-off');
		} else {
			$(this).parents('.form_item').find('input').prop("type", "text");
			$(this).parents('.form_item').find('.input-pass').addClass('icon-eye');
			$(this).parents('.form_item').find('.input-pass').removeClass('icon-eye-off');
		}

	});
	// Клик на форме и перенос фокуса
	$('.form_item').click(function (e) {
		if ($(this).find('.jsfocus').length) {
			e.preventDefault();
			$(this).find('.jsfocus').focus();
			$(this).addClass('form_item_focus');
			//get_label_for_input($(this).find('.jsfocus'));
		}
		//	if ($(this).find('select').length)
		//	{
		//		$(this).addClass('form_item_focus');
		//	}
	});

	//Очистить значение в инпуте
	$('.input-clear').click(function (e) {
		e.preventDefault();
		$(this).parents('.form_item').removeClass('form_item_has_value');
		$(this).parents('.form_item').find('.jsfocus').val('');
	});

	$('.jsfocus').focus(function () {
		$(this).parents('.form_item').addClass('form_item_focus');
		//get_label_for_input($(this));
	});
	// Если в поле что-то пишем, то показываем кнопку очистки
	//$('.jsfocus').keyup(function () {
	//	if ($(this).val() == '') {}
	//	else {
	//		if (!$(this).parents('.form_item').hasClass('form_item_has_value')) {
	//			$(this).parents('.form_item').addClass('form_item_has_value');
	//		}
	//	}
	//});

	$('.jsfocus').blur(function () {
		$(this).parents('.form_item').removeClass('form_item_focus');

		if ($(this).val() == '') {

			$(this).parents('.form_item').removeClass('form_item_has_value');
		} else {
			$(this).parents('.form_item').addClass('form_item_has_value');
		}
		//get_label_for_input($(this));

	});

	function get_label_for_input(wrp) {
		// ** Получаем данные о LABEL для input-texarea **
		var labeltxt = wrp.parents('.form_item').find('label').text();
		var labeldefault = wrp.parents('.form_item').find('label').data('label-default');
		var labelfocused = wrp.parents('.form_item').find('label').data('label-focused');

		if ((labeldefault == '') || (labeldefault === undefined)) {
			labeldefault = labeltxt;
		}
		if ((labelfocused == '') || (labelfocused === undefined)) {
			labelfocused = labeltxt;
		}

		if ((wrp.parents('.form_item').hasClass('form_item_focus')) || (wrp.parents('.form_item').hasClass('form_item_has_value'))) {
			wrp.parents('.form_item').find('label').text(labelfocused);
		} else {
			wrp.parents('.form_item').find('label').text(labeldefault);
		}

		// ** /Получаем данные о LABEL для селекта**
	}

	//Универсальная валидация форм (по клику на js-subm_form , с параметрами form_result_id form_id form_url. Если у поля есть js-email или js-phone , запустится валидация)

	$(".js-resend").click(function (e) {

		e.preventDefault();
		$(this).parents('form').removeClass('sended');
		$(this).parents('form').removeClass('error');

	});

	$(".js_form_subm").click(function (e) {

		e.preventDefault();
		var sendbtn = $(this);

		if (sendbtn.hasClass('disabled'))
			return false;

		var sendbtn_width = sendbtn.outerWidth(true);
		//var form_result_id = sendbtn.attr("data-result_id"); //Куда писать результат
		var form_id = '#' + sendbtn.attr("data-form_id"); //Что субмитим
		var form_url = sendbtn.attr("data-url"); // куда отправлять POST

		$(form_id).find('.jsfocus').each(function () {
			if (($(this).val() == '') && ($(this).hasClass('js-req'))) {
				$(this).parents('.form_item').addClass('form_item_error');
			} else {
				$(this).parents('.form_item').removeClass('form_item_error');
			}

			if ($(this).hasClass('js-email')) {
				ValidMail($(this));
			}
			if ($(this).hasClass('js-phone')) {
				ValidPhoneSimple($(this));
			}
			if ($(this).hasClass('js-name')) {
				ValidName($(this));
			}

		});
		$(form_id).find('.js-checkme').each(function () {
			$(this).parents('.form_item').addClass('form_item_error');
			if (CheckBox_check($(this))) {
				$(this).parents('.form_item').addClass('form_item_error');
			} else {
				$(this).parents('.form_item').removeClass('form_item_error');

			}

		});

		if (!$(form_id).find('.form_item').hasClass('form_item_error')) {

			var reCaptcha  = !!grecaptcha.getResponse();
			if (!reCaptcha) {
				$(".captcha").addClass("shake-error");
				setTimeout(function(){
					$(".captcha").removeClass("shake-error");
				}, 500);

				return false;
			}

			var name = $.trim($("input[name='name']").val());
			var email = $.trim($("input[name='email']").val());

			sendbtn.addClass('disabled');

			$.ajax({
				url: '/api/subscribe',
				type: 'POST',
				dataType: 'json',
				data: {
					firstname: name,
					email: email
				},
				complete: function() {

					$('.popup_tab').addClass('none');
					$('.form_is_sended').removeClass('none');
					$('.popup_1').removeClass('popup_1_back');
					$('.popup_1').addClass('popup_1_sended');

					window.formSended = 1;

					sendbtn.removeClass('disabled');
				},
				success: function(res) {
					//console.log('success', res);

					//console.log(res);

					$(".form_is_sended .popup_title").html("Подтверди адрес");

					if (res.text == '<span class="popup-result__br-desctop">Ваша подписка оформлена.</span>') {
						$(".form_is_sended .popup_title").html("Подписка подтверждена!");
						$(".form_is_sended .second_flex_col p").html("Мы&#160;сообщим тебе сразу, как только выйдет финальный эксклюзив от&#160;артистов");
						$.cookie('subscription', 1, { expires: 7, path: '/' });
						$(".vote__item").attr('data-window', 'popup_2');
					} else {
						$(".form_is_sended .second_flex_col p").html("Мы&nbsp;отправили тебе письмо на&nbsp;почту для подтверждения. Пройди по&nbsp;ссылке и&nbsp;заверши подписку");
					}
				},
				error: function(res) {
					//console.log('error', res);

					$(".form_is_sended .popup_title").html("Ошибка");
					$(".form_is_sended .second_flex_col p").html(res.responseJSON.text);
				}
			});

			//sendAjaxForm2(form_id, form_url, sendbtn);

			//alert('Отправка формы. Добавьте код в 500 строку.');

		}
	});

});

window.addEventListener('scroll', function (event) {
	const arrow = document.querySelector('#status_arrow')
		const count = arrow.dataset.count
		if ((arrow.getBoundingClientRect().y) < window.scrollY) {
			arrow.style.transform = 'translateX(-50%) rotate(' + count + 'deg)'
		}
}, false);


//Animation 
$(window).on("load", function () {

init();
$('.hero_bg').addClass('loaded');

});

(function (cjs, an) {
var p; // shortcut to reference prototypes
var lib={};var ss={};var img={};
lib.ssMetadata = [];
// symbols:
(lib.pic1 = function() {
	this.initialize(img.pic1);
}).prototype = p = new cjs.Bitmap();
p.nominalBounds = new cjs.Rectangle(0,0,595,630);
(lib.pic2 = function() {
	this.initialize(img.pic2);
}).prototype = p = new cjs.Bitmap();
p.nominalBounds = new cjs.Rectangle(0,0,486,630);
(lib.pic3 = function() {
	this.initialize(img.pic3);
}).prototype = p = new cjs.Bitmap();
p.nominalBounds = new cjs.Rectangle(0,0,558,712);
(lib.pic4 = function() {
	this.initialize(img.pic4);
}).prototype = p = new cjs.Bitmap();
p.nominalBounds = new cjs.Rectangle(0,0,468,863);
(lib.pic4_1 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});
	// Слой_1
	this.instance = new lib.pic3();
	this.instance.parent = this;
	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));
}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,558,712);
(lib.pic3_1 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});
	// Слой_1
	this.instance = new lib.pic4();
	this.instance.parent = this;
	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));
}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,468,863);
(lib.pic2_1 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});
	// Слой_1
	this.instance = new lib.pic2();
	this.instance.parent = this;
	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));
}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,486,630);
(lib.pic1_1 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});
	// Слой_1
	this.instance = new lib.pic1();
	this.instance.parent = this;
	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));
}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,595,630);
// stage content:
(lib.x5anim = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});
	// timeline functions:
	this.frame_89 = function() {
		this.stop();
	}
	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).wait(89).call(this.frame_89).wait(1));
	// Layer 1 (mask)
	var mask = new cjs.Shape();
	mask._off = true;
	mask.graphics.p("Eg5BhGeMByDAAAMAAAB7BMhyDAR8g");
	mask.setTransform(365,451.1);
	// Слой_8
	this.instance = new lib.pic3_1("synched",0);
	this.instance.parent = this;
	this.instance.setTransform(343.8,967.7,0.209,0.209,0,0,0,89.9,621.8);
	this.instance._off = true;
	var maskedShapeInstanceList = [this.instance];
	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}
	this.timeline.addTween(cjs.Tween.get(this.instance).wait(63).to({_off:false},0).to({regX:89.7,regY:621.6,scaleX:1,scaleY:1,x:351.7,y:903.6},11,cjs.Ease.backOut).wait(16));
	// Слой_7
	this.instance_1 = new lib.pic4_1("synched",0);
	this.instance_1.parent = this;
	this.instance_1.setTransform(400.7,967.6,0.22,0.22,0,0,0,473.8,569.8);
	this.instance_1._off = true;
	var maskedShapeInstanceList = [this.instance_1];
	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}
	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(59).to({_off:false},0).to({regX:473.7,regY:569.6,scaleX:1,scaleY:1,x:453.7,y:857.6},11,cjs.Ease.backOut).wait(20));
	// image 14.png
	this.instance_2 = new lib.pic2_1("synched",0);
	this.instance_2.parent = this;
	this.instance_2.setTransform(381.8,986.7,0.289,0.289,0,0,0,89.9,621.8);
	this.instance_2._off = true;
	var maskedShapeInstanceList = [this.instance_2];
	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}
	this.timeline.addTween(cjs.Tween.get(this.instance_2).wait(8).to({_off:false},0).to({regX:89.7,regY:621.6,scaleX:1,scaleY:1,x:381.7,y:872.6},11,cjs.Ease.backOut).wait(32).to({startPosition:0},0).to({scaleX:0.65,scaleY:0.65,x:-245.1,y:942.4},7,cjs.Ease.backIn).wait(32));
	// image 13.png
	this.instance_3 = new lib.pic1_1("synched",0);
	this.instance_3.parent = this;
	this.instance_3.setTransform(381.7,967.6,0.286,0.286,0,0,0,473.7,569.7);
	this.instance_3._off = true;
	var maskedShapeInstanceList = [this.instance_3];
	for(var shapedInstanceItr = 0; shapedInstanceItr < maskedShapeInstanceList.length; shapedInstanceItr++) {
		maskedShapeInstanceList[shapedInstanceItr].mask = mask;
	}
	this.timeline.addTween(cjs.Tween.get(this.instance_3).wait(4).to({_off:false},0).to({regY:569.6,scaleX:1,scaleY:1,y:872.6},11,cjs.Ease.backOut).wait(36).to({startPosition:0},0).to({regX:473.6,scaleX:0.65,scaleY:0.65,x:-245.2,y:942.3},7,cjs.Ease.backIn).wait(32));
}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(365,460,730,1581);
// library properties:
lib.properties = {
	id: 'A024E03B259143F29D937E20E81B8346',
	width: 730,
	height: 920,
	fps: 30,
	color: "#FFFFFF",
	opacity: 1.00,
	manifest: [
		{src:"/img/pic1.png", id:"pic1"},
		{src:"/img/pic2.png", id:"pic2"},
		{src:"/img/pic3.png", id:"pic3"},
		{src:"/img/pic4.png", id:"pic4"}
	],
	preloads: []
};
// bootstrap callback support:
(lib.Stage = function(canvas) {
	createjs.Stage.call(this, canvas);
}).prototype = p = new createjs.Stage();
p.setAutoPlay = function(autoPlay) {
	this.tickEnabled = autoPlay;
}
p.play = function() { this.tickEnabled = true; this.getChildAt(0).gotoAndPlay(this.getTimelinePosition()) }
p.stop = function(ms) { if(ms) this.seek(ms); this.tickEnabled = false; }
p.seek = function(ms) { this.tickEnabled = true; this.getChildAt(0).gotoAndStop(lib.properties.fps * ms / 1000); }
p.getDuration = function() { return this.getChildAt(0).totalFrames / lib.properties.fps * 1000; }
p.getTimelinePosition = function() { return this.getChildAt(0).currentFrame / lib.properties.fps * 1000; }
an.bootcompsLoaded = an.bootcompsLoaded || [];
if(!an.bootstrapListeners) {
	an.bootstrapListeners=[];
}
an.bootstrapCallback=function(fnCallback) {
	an.bootstrapListeners.push(fnCallback);
	if(an.bootcompsLoaded.length > 0) {
		for(var i=0; i<an.bootcompsLoaded.length; ++i) {
			fnCallback(an.bootcompsLoaded[i]);
		}
	}
};
an.compositions = an.compositions || {};
an.compositions['A024E03B259143F29D937E20E81B8346'] = {
	getStage: function() { return exportRoot.getStage(); },
	getLibrary: function() { return lib; },
	getSpriteSheet: function() { return ss; },
	getImages: function() { return img; }
};
an.compositionLoaded = function(id) {
	an.bootcompsLoaded.push(id);
	for(var j=0; j<an.bootstrapListeners.length; j++) {
		an.bootstrapListeners[j](id);
	}
}
an.getComposition = function(id) {
	return an.compositions[id];
}
})(createjs = createjs||{}, AdobeAn = AdobeAn||{});
var createjs, AdobeAn;

var canvas, stage, exportRoot, anim_container, dom_overlay_container, fnStartAnimation;
function init() {
	canvas = document.getElementById("canvas");
	anim_container = document.getElementById("animation_container");
	dom_overlay_container = document.getElementById("dom_overlay_container");
	var comp=AdobeAn.getComposition("A024E03B259143F29D937E20E81B8346");
	var lib=comp.getLibrary();
	var loader = new createjs.LoadQueue(false);
	loader.addEventListener("fileload", function(evt){handleFileLoad(evt,comp)});
	loader.addEventListener("complete", function(evt){handleComplete(evt,comp)});
	var lib=comp.getLibrary();
	loader.loadManifest(lib.properties.manifest);
}
function handleFileLoad(evt, comp) {
	var images=comp.getImages();	
	if (evt && (evt.item.type == "image")) { images[evt.item.id] = evt.result; }	
}
function handleComplete(evt,comp) {
	//This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
	var lib=comp.getLibrary();
	var ss=comp.getSpriteSheet();
	var queue = evt.target;
	var ssMetadata = lib.ssMetadata;
	for(i=0; i<ssMetadata.length; i++) {
		ss[ssMetadata[i].name] = new createjs.SpriteSheet( {"images": [queue.getResult(ssMetadata[i].name)], "frames": ssMetadata[i].frames} )
	}
	exportRoot = new lib.x5anim();
	stage = new lib.Stage(canvas);	
	//Registers the "tick" event listener.
	fnStartAnimation = function() {
		stage.addChild(exportRoot);
		createjs.Ticker.setFPS(lib.properties.fps);
		createjs.Ticker.addEventListener("tick", stage);
	}	    
	//Code to support hidpi screens and responsive scaling.
	function makeResponsive(isResp, respDim, isScale, scaleType) {		
		var lastW, lastH, lastS=1;		
		window.addEventListener('resize', resizeCanvas);		
		resizeCanvas();		
		function resizeCanvas() {			
			var w = lib.properties.width, h = lib.properties.height;			
			var iw = window.innerWidth, ih=window.innerHeight;			
			var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;			
			if(isResp) {                
				if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {                    
					sRatio = lastS;                
				}				
				else if(!isScale) {					
					if(iw<w || ih<h)						
						sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==1) {					
					sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==2) {					
					sRatio = Math.max(xRatio, yRatio);				
				}			
			}

			sRatio = sRatio;
			canvas.width = w*pRatio*sRatio;			
			canvas.height = h*pRatio*sRatio;
			canvas.style.width = dom_overlay_container.style.width = anim_container.style.width =  w*sRatio+'px';				
			canvas.style.height = anim_container.style.height = dom_overlay_container.style.height = h*sRatio+'px';
			stage.scaleX = pRatio*sRatio;			
			stage.scaleY = pRatio*sRatio;			
			lastW = iw; lastH = ih; lastS = sRatio;            
			stage.tickOnUpdate = false;            
			stage.update();            
			stage.tickOnUpdate = true;		
		}
	}
	makeResponsive(true,'both',true,1);	
	AdobeAn.compositionLoaded(lib.properties.id);
	fnStartAnimation();
}


